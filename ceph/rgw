RGW 是 Ceph 提供对象存储服务的网关组件，它的职责可以从两方面理解：

1. 客户端视角（面向应用/用户）：
充当一个 HTTP 服务器；
支持 RESTful 接口（兼容 S3 和 Swift）；
用户通过 HTTP/HTTPS 向 RGW 发起请求（如 PUT、GET、DELETE 对象）；
RGW 接收请求、解析数据并响应，像一个 Web 服务器。

2. 服务端视角（面向 Ceph 集群）：
充当一个 RADOS 客户端；
将用户上传的数据转存为 Ceph 的底层对象，写入 RADOS；
从 RADOS 读取对象数据后返回给用户。

对象存储的层级关系
用户
存储桶
对象

ceph 负责将这些对象存储的数据实体，转化为， rados 的对象（数据， 键值对xattr,键值omap）

>>>用户:用户认证信息， 对存储桶的权限信息， 容量配额 一个用户对应一个rados 对象
密钥对象 email对象 和 子用户对象 叫做索引对象（有些操作需要以email为索引去获取用户信息）的数据部分存储用户ID
再通过用户ID访问用户信息对象获取用户信息
密钥对象 
email对象    ---》用户id---->>用户信息
子用户对象

>>>存储桶 一个bucket对应一个rados 对象 ， 存储桶包含用户自定义元数据存储在rados 对象xattr中，

>>>对象存储对象 一个对象会被分割成多个rados 对象
对象的上传：
整段上传， 对象存储对象（一下简称对象）< rados 对象， 只存储一个rados 对象，如果大于， 则分为 首对象，中间对象 和尾对象
分段上传现将应用对象分段，再把分了段的子对象按照整段上传的方式上传

整段上传的首对象（rados对象）保存了应用对象的元数据和应用对象与rados 对象的映射关系
分段上传，在所有分段均上传完毕后，会新生成一个 rados 对象用来保存分段信息，对象元数据信息，和对象与rados 对象的映射关系



